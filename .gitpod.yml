# Imagem Docker
image:
  file: .gitpod.Dockerfile

# Portas e Ações
ports:
  - port: 4200
    onOpen: open-preview
  - port: 27017
    onOpen: ignore

# Tarefas na Inicialização
tasks:
  - before: export NG_CLI_ANALYTICS=ci
  - init: echo n | npm i -g @angular/cli
  - command: >
        npm install -g jshint typescript-eslint
  - command: >
        mkdir -p /workspace/data && 
        mongod --dbpath /workspace/data
  - command: >
      cd ./aplicacao-web &&
      npm install
      sleep 6 &&
      ng serve --host 0.0.0.0 --disableHostCheck
  - command: >
      cd ./servidor-api &&
      npm install

# Github
github:
  prebuilds:
    master: true
    branches: true
    pullRequests: true
    pullRequestsFromForks: true
    addCheck: true
    addComment: true
    addBadge: false
    addLabel: false
    
# Extensões VSCode
vscode:
  extensions:
    - ms-azuretools.vscode-docker@1.8.1:xuHtLS23Q5czFwYH7grcCQ==
    - mongodb.mongodb-vscode@0.5.0:f041958ce98090c95ed79a8a75b69c00
